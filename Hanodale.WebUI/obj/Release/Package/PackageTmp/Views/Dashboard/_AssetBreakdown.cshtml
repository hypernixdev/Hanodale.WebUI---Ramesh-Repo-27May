@model Hanodale.WebUI.Models.DashboardModel
@using Hanodale.Utility.Globalize
@using Hanodale.WebUI
@using System.Web.Optimization

<!-- Hidden Variable -->
<input type="hidden" class="mainPart" value="assetbreakdowndashboard">
@*<input type="hidden" class="table-congif" value="assetbreakdowndashboard" data-columncount="5" data-conditionid="4" data-button="false" data-condition="false" data-extended-event-btn="true" data-hidebtn="false" data-export-btn="true" data-record-id="@Model.element_Id">*@
<input type="hidden" class="@(Model.isMytask ? "" : "table-congif")" value="ppmpendingwodashboard" data-columncount="5" data-conditionid="4" data-button="false" data-condition="false" data-extended-event-btn="true" data-hidebtn="false" data-export-btn="true">
<input type="hidden" class="@(Model.isMytask ? "" : "table-congif")" value="incomingppmdashboard" data-columncount="6" data-conditionid="13" data-button="false" data-condition="false" data-extended-event-btn="false" data-hidebtn="false" data-export-btn="true">
<input type="hidden" class="@(Model.isMytask ? "" : "table-congif")" value="pendingassetscheduledashboard" data-columncount="5" data-conditionid="4" data-button="false" data-condition="false" data-extended-event-btn="false" data-hidebtn="false" data-export-btn="true">
<input type="hidden" class="@(Model.isMytask ? "table-congif" : "")" value="myapprovaldahsboard" data-columncount="5" data-conditionid="4" data-button="false" data-condition="false" data-extended-event-btn="false" data-hidebtn="false" data-export-btn="true">
<!-- Hidden Variable -->

<div class="formSpliter"></div>
<div id="message" class="alert alert-success" style="display: none"></div>
<!-- widget grid -->
<style>
    div.dataTables_wrapper {
        margin: 10px;
        border: 1px solid #ddd;
        padding: 10px;
    }

    div.dt-toolbar {
        padding: 0px;
        padding-bottom: 5px;
    }

        div.dt-toolbar div {
            padding: 0px;
        }
</style>
<section id="widget-grid" class="">
    <!-- row -->

    



</section>
@if (!Model.isMytask)
{ 
    <section id="widget-grid1" class="">
        <!-- row -->
        <div class="row">
            <!-- NEW WIDGET START -->
            <article class="col-sm-12">
                <!-- Widget ID (each widget will need unique ID)-->
                <div class="jarviswidget jarviswidget-color-darken" id="wid-id-232555" data-widget-editbutton="false"
                    data-widget-colorbutton="false">
                    <header>
                        <span class="widget-icon"><i class="fa fa-table"></i></span>
                        <h2>@Resources.PPM_PENDING_WORK_ORDER_GRID__TITLE</h2>
                    </header>

                    <!-- widget div-->
                    <div>
                        <!-- widget edit box -->
                        <div class="jarviswidget-editbox">
                            <!-- This area used as dropdown edit box -->
                        </div>
                        <!-- end widget edit box -->

                        <!-- widget content -->
                        <div class="widget-body no-padding ">
                            <table id="dt_ppmpendingwodashboard" class="table table-striped table-bordered table-hover" width="100%">
                                <div class="smart-form" id="dt_ppmpendingwodashboard-search-panel">
                                    <div class="row" style="margin: 20px 10px 5px 10px">
                                        <div class="col-xs-6 col-sm-6">
                                            <div class="col-xs-12 col-sm-8 col-md-6 col-lg-6" style="text-align: left; margin-bottom: 0">
                                                <div class="col-sm-11">
                                                    @Html.LabelFor(model => model.createdDateFrom, new { @class = "col-md-12 control-label", style = "font-weight:bold" })
                                                </div>
                                            </div>

                                            <div class="col-xs-12 col-sm-8 col-md-6 col-lg-6" style="text-align: left; margin-bottom: 0">
                                                <div class="col-sm-11">
                                                    @Html.LabelFor(model => model.createdDateTo, new { @class = "col-md-12 control-label", style = "font-weight:bold" })
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                    <div class="row" style="margin: 0px 10px">
                                        <div class="col-xs-6 col-sm-6">
                                            <div class="form-group col-xs-12 col-sm-6 col-md-6 col-lg-6">
                                                <div class="col-xs-12 col-sm-8 col-md-8 col-lg-8">
                                                    <div class="clearfix">
                                                        <label class="input">
                                                            <i class="icon-append fa fa-qrcode"></i>
                                                            @Html.EditorFor(model => model.createdDateFrom, new { id = "cdf1", name = "cdf1", @class = "datepicker form-control date-picker date" })
                                                            @Html.ValidationMessageFor(m => m.createdDateFrom)
                                                            <i></i>
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="form-group col-xs-12 col-sm-6 col-md-6 col-lg-6">
                                                <div class="col-xs-12 col-sm-8 col-md-8 col-lg-8">
                                                    <div class="clearfix">
                                                        <label class="input">
                                                            <i class="icon-append fa fa-qrcode"></i>
                                                            @Html.EditorFor(model => model.createdDateTo, new { id = "cdf2", name = "cdf2", @class = "datepicker form-control date-picker" })
                                                            @Html.ValidationMessageFor(m => m.createdDateTo)
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>


                                    </div>
                                </div>
                                <thead>
                                    <tr>
                                        <th data-class="expand" style="text-align:center">@*<i class="fa fa-fw   fa-pencil text-muted hidden-md hidden-sm hidden-xs tableIcon"></i>*@@Resources.WORKORDER_CODE</th>
                                        <th data-hide="phone,tablet" style="text-align:center">@*<i class="fa fa-fw   fa-pencil text-muted hidden-md hidden-sm hidden-xs tableIcon"></i>*@@Resources.WORKORDER_NAME</th>
                                        <th data-hide="phone,tablet" style="text-align:center">@*<i class="fa fa-fw   fa-pencil text-muted hidden-md hidden-sm hidden-xs tableIcon"></i>*@@Resources.WORKORDER_REQUESTER_ID</th>
                                        <th data-hide="phone,tablet" style="text-align:center">@*<i class="fa fa-fw   fa-calendar text-muted hidden-md hidden-sm hidden-xs tableIcon"></i>*@@Resources.WORKORDER_REQUIREDDATE</th>
                                        <th data-hide="phone,tablet" style="text-align:center">@*<i class="fa fa-fw   fa-pencil text-muted hidden-md hidden-sm hidden-xs tableIcon"></i>*@@Resources.WORKORDER_RESPONSIBLEBUSINESS</th>
                                    </tr>
                                </thead>
                                <tbody>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </article>
        </div>
    </section>
     
    <section id="widget-grid4" class="">
        <!-- row -->
        <div class="row">
            <!-- NEW WIDGET START -->
            <article class="col-sm-12">
                <!-- Widget ID (each widget will need unique ID)-->
                <div class="jarviswidget jarviswidget-color-darken" id="wid-id-435255" data-widget-editbutton="false"
                    data-widget-colorbutton="false">
                    <header>
                        <span class="widget-icon"><i class="fa fa-table"></i></span>
                        <h2>@Resources.INCOMING_PPM_GRID_TITLE</h2>
                    </header>

                    <!-- widget div-->
                    <div>
                        <!-- widget edit box -->
                        <div class="jarviswidget-editbox">
                            <!-- This area used as dropdown edit box -->
                        </div>
                        <!-- end widget edit box -->

                        <!-- widget content -->
                        <div class="widget-body no-padding ">
                            <table id="dt_incomingppmdashboard" class="table table-striped table-bordered table-hover" width="100%">
                                <div class="smart-form" id="dt_incomingppmdashboard-search-panel">
                                    <div class="row" style="margin: 20px 10px 5px 10px">
                                        <div class="col-xs-6 col-sm-6">
                                            <div class="col-sm-4" style="text-align: left; margin-bottom: 0">
                                                <div class="col-sm-11">
                                                    <label style="font-weight: bold">30Days Forward</label>
                                                </div>
                                            </div>

                                            <div class="col-xs-12 col-sm-8 col-md-6 col-lg-6" style="text-align: left; margin-bottom: 0">
                                                <div class="col-sm-11">
                                                    @Html.LabelFor(model => model.nextServiceDate, new { @class = "col-md-12 control-label", style = "font-weight:bold" })
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row" style="margin: 0px 10px">
                                        <div class="col-xs-6 col-sm-6">
                                            <div class="form-group col-sm-4">
                                                <div class="col-sm-11">
                                                    <div class="clearfix">
                                                        <label class="checkbox">
                                                            <input id="d" type="checkbox" name="checkbox" value="false">
 
                                                            <i></i>
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="form-group col-xs-12 col-sm-6 col-md-6 col-lg-6" id="show">
                                                <div class="col-xs-12 col-sm-8 col-md-8 col-lg-8">
                                                    <div class="clearfix">
                                                        <label class="input">
                                                            <i class="icon-append fa fa-qrcode"></i>
                                                            @Html.EditorFor(model => model.nextServiceDate, new { @class = "datepicker form-control date-picker" })
                                                            
                                                            @Html.ValidationMessageFor(m => m.nextServiceDate)
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>

                                            @*<div class="form-group col-xs-12 col-sm-6 col-md-6 col-lg-6" id="hide">
                                                <div class="col-xs-12 col-sm-8 col-md-8 col-lg-8">
                                                    <div class="clearfix">
                                                        <label class="input">
                                                            <i class="icon-append fa fa-qrcode"></i>
                                                            @Html.EditorFor(model => model.nextServiceDateTo, new { @class = "datepicker form-control date-picker" })
                                                            @Html.ValidationMessageFor(m => m.nextServiceDateTo)
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>*@

                                        </div>


                                    </div>

                                    <div class="row" style="margin: 0px 1px 1px 10px">
                                        <div class="col-xs-0 col-sm-0">
                                            <div class="col-sm-2" style="text-align: left; margin-bottom: 0">
                                                <div class="col-sm-11">
                                                    @Html.LabelFor(model => model.filterIds, new { @class = "col-md-8 control-label", style = "font-weight:bold" })
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row" style="margin: 0px 10px">
                                        <div class="form-group col-xs-12 col-sm-6 col-md-6 col-lg-6">
                                            <div class="col-sm-3">
                                                <div class="clearfix">
                                                    <label class="select">
                                                        @Html.EditorFor(model => model.filterIds, null, new { @class = "form-control multipleSelect", dataValue = @Model.lstFilters })
                                                        @Html.ValidationMessageFor(m => m.filterIds)
                                                        @*<i></i>*@
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <thead>
                                    <tr>
                                        <th data-class="expand" style="text-align:center"><i class="fa fa-fw   fa-pencil text-muted hidden-md hidden-sm hidden-xs tableIcon"></i>Asset Type Code</th>
                                        <th data-hide="phone,tablet" style="text-align:center"><i class="fa fa-fw fa-pencil text-muted hidden-md hidden-sm hidden-xs tableIcon "></i>@Resources.GRID_ASSET_CODE</th>
                                        <th data-hide="phone,tablet" style="text-align:center"><i class="fa fa-fw   fa-pencil text-muted hidden-md hidden-sm hidden-xs tableIcon"></i>@Resources.GRID_SCHEDULE_CODE</th>
                                        <th data-hide="phone,tablet" style="text-align:center"><i class="fa fa-fw fa-pencil text-muted hidden-md hidden-sm hidden-xs tableIcon "></i>Scheduled Description</th>
                                        <th data-hide="phone,tablet" style="text-align:center"><i class="fa fa-fw fa-pencil text-muted hidden-md hidden-sm hidden-xs tableIcon "></i>@Resources.SCHEDULED_LASTSERVICE</th>
                                        <th data-hide="phone,tablet" style="text-align:center"><i class="fa fa-fw   fa-calendar text-muted hidden-md hidden-sm hidden-xs tableIcon"></i>@Resources.SCHEDULED_NEXTSERVICE</th>
                                    </tr>
                                </thead>
                                <tbody>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </article>
        </div>
    </section>
     
    <section id="widget-grid2" class="">
        <!-- row -->
        <div class="row">
            <!-- NEW WIDGET START -->
            <article class="col-sm-12">
                <!-- Widget ID (each widget will need unique ID)-->
                <div class="jarviswidget jarviswidget-color-darken" id="wid-id-132555" data-widget-editbutton="false"
                    data-widget-colorbutton="false">
                    <header>
                        <span class="widget-icon"><i class="fa fa-table"></i></span>
                        <h2>@Resources.PENDING_ASSET_SCHEDULE_GRID_TITLE</h2>
                    </header>

                    <!-- widget div-->
                    <div>
                        <!-- widget edit box -->
                        <div class="jarviswidget-editbox">
                            <!-- This area used as dropdown edit box -->
                        </div>
                        <!-- end widget edit box -->

                        <!-- widget content -->
                        <div class="widget-body no-padding ">
                            <table id="dt_pendingassetscheduledashboard" class="table table-striped table-bordered table-hover" width="100%">
                                <thead>
                                    <tr>
                                        <th data-class="expand" style="text-align:center">@*<i class="fa fa-fw   fa-pencil text-muted hidden-md hidden-sm hidden-xs tableIcon"></i>*@@Resources.WORKORDER_CODE</th>
                                        <th data-hide="phone,tablet" style="text-align:center">@*<i class="fa fa-fw   fa-pencil text-muted hidden-md hidden-sm hidden-xs tableIcon"></i>*@@Resources.WORKORDER_NAME</th>
                                        <th data-hide="phone,tablet" style="text-align:center">@*<i class="fa fa-fw   fa-pencil text-muted hidden-md hidden-sm hidden-xs tableIcon"></i>*@@Resources.WORKORDER_REQUESTER_ID</th>
                                        <th data-hide="phone,tablet" style="text-align:center">@*<i class="fa fa-fw   fa-calendar text-muted hidden-md hidden-sm hidden-xs tableIcon"></i>*@@Resources.WORKORDER_REQUIREDDATE</th>
                                        <th data-hide="phone,tablet" style="text-align:center">@*<i class="fa fa-fw   fa-pencil text-muted hidden-md hidden-sm hidden-xs tableIcon"></i>*@@Resources.WORKORDER_RESPONSIBLEBUSINESS</th>
                                    </tr>
                                </thead>
                                <tbody>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </article>
        </div>
    </section>
}
else
{
    <section id="widget-grid3" class="">
        <!-- row -->
        <div class="">
            <!-- NEW WIDGET START -->
            <article class="col-xs-12 col-sm-12 col-md-12 col-lg-12 nPadding">

                <!-- Widget ID (each widget will need unique ID)-->
                <div class="jarviswidget jarviswidget-color-darken" id="wid-id-85254"
                    data-widget-editbutton="false"
                    data-widget-deletebutton="false"
                    data-widget-colorbutton="false"
                    data-widget-sortable="false">
                    <header>
                        <span class="widget-icon"><i class="fa fa-table"></i></span>
                        <h2>@Resources.MY_APPROVAL_GRID_TITLE</h2>

                    </header>

                    <!-- widget div-->
                    <div>
                        <!-- widget edit box -->
                        <div class="jarviswidget-editbox">
                            <!-- This area used as dropdown edit box -->
                        </div>
                        <!-- end widget edit box -->

                        <!-- widget content -->
                        <div class="widget-body no-padding">
                            <table id="dt_myapprovaldahsboard" class="table table-striped table-bordered table-hover" width="100%">
                                <thead>
                                    <tr>
                                        <th data-class="expand" style="text-align:center">@*<i class="fa fa-fw   fa-pencil text-muted hidden-md hidden-sm hidden-xs tableIcon"></i>*@@Resources.APPROVAL_SUBMENU_ID</th>
                                        <th data-hide="phone,tablet" style="text-align:center">@*<i class="fa fa-fw   fa-pencil text-muted hidden-md hidden-sm hidden-xs tableIcon"></i>*@@Resources.APPROVAL_CODE</th>
                                        <th data-hide="phone,tablet" style="text-align:center">@*<i class="fa fa-fw   fa-pencil text-muted hidden-md hidden-sm hidden-xs tableIcon"></i>*@@Resources.APPROVAL_DESCRIPTION</th>
                                        <th data-hide="phone,tablet" style="text-align:center">@*<i class="fa fa-fw   fa-pencil text-muted hidden-md hidden-sm hidden-xs tableIcon"></i>*@@Resources.APPROVAL_SUBMITTEDBY</th>
                                        <th data-hide="phone,tablet" style="text-align:center">@*<i class="fa fa-fw   fa-calendar text-muted hidden-md hidden-sm hidden-xs tableIcon"></i>*@@Resources.APPROVAL_SUBMITTEDDATE</th>
                                    </tr>
                                </thead>
                                <tbody>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </article>
        </div>

    </section>
}
@Scripts.Render(bundles.scripts.common_add_edit)
@Scripts.Render(bundles.scripts.common_index)
@*@Scripts.Render(bundles.scripts.workorder_index)*@
<!-- Protected Script -->
<style>
    #statusPlaceholder, #categoryPlaceholder {
        width: 450px;
        height: 250px;
    }
</style>
<script>
    _initActionExtended = function (partName, readOnly) {
        $('a.linkToGrid').on("click", function () {
            var recordId = $(this).attr("data-value");
            var param = { recordId: recordId }
            if (recordId) {
                var parent = $(this).closest('table').attr('id');
                if (parent == 'dt_assetbreakdowndashboard') {
                    var actionUrl = "WorkOrder/Index/";
                    var param = { recordId: recordId }
                    navigate.viewByParameter(actionUrl, param);
                }
                else if (parent == 'dt_myapprovaldahsboard') {
                    var actionUrl = "MyApprovalDahsboard/Index/";
                    var param = { recordId: recordId }
                    navigate.viewByParameter(actionUrl, param);
                }
               else if (parent == 'dt_ppmpendingwodashboard') {
                    var actionUrl = "WorkOrder/PPMIndex/";
                    navigate.view(actionUrl);
                }
            }
        })
        //$('.view-approval').on("click", function () {
        //    alert('2')
        //    var recordId = $(this).attr("data-id")
        //    var param = { recordId: recordId }
        //    if (recordId) {
        //        //var parent = $(this).closest('table').attr('id');
        //        actionUrl = "MyApprovalDahsboard/Index/";
        //        var param = { recordId: recordId }
        //        navigate.viewByParameter(actionUrl, param);
        //    }
        //})
        //$('.linkToGrid').on("click", function () {
        //    alert(false)
        //    var recordId = $(this).attr("data-value");
        //    var param = { recordId: recordId }
        //    if (recordId) {
        //        var actionUrl = "WorkOrder/PPMIndex/";
        //        var parent = $(this).closest('table').attr('id');
        //        if (parent == 'dt_ppmpendingwodashboard') {
        //            actionUrl = "MyApprovalDahsboard/Index/";
        //        }

        //        var param = { recordId: recordId }
        //        navigate.viewByParameter(actionUrl, param);
        //    }
        //})
       // $('#show').show();
     //   $('#hide').hide();
       setCheckBox($('#d'));
        function setCheckBox($this) {
            if ($this.attr("checked") == "checked") {
               // $('#hide').show();
              //  $('#hide').addClass('form-group');
              //  $('#show').hide();
                //   $('#show').removeClass('form-group');
               // alert(true)
                $('#d').val(false);
                var _toDate = '@Html.Raw(Model.nextServiceDateTo.GetValueOrDefault().ToString("dd/MM/yyyy"))';
                $('#nextServiceDate').val(_toDate);
            }
            else {
              //  $('#show').show();
              //  $('#show').addClass('form-group');
             //   $('#hide').hide();
                //   $('#hide').removeClass('form-group');
                // alert(false)
                $('#d').val(true);
                var _toDate = '@Html.Raw(Model.nextServiceDate.GetValueOrDefault().ToString("dd/MM/yyyy"))';
                $('#nextServiceDate').val(_toDate);
              //  $('#nextServiceDate').trigger("change");
            }
        }

        $('#d').on("click", function () {
            setCheckBox($(this));
        })

    

    }
</script>
